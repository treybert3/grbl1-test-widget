<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <title><!--(auto-fill by runme.js--></title>

    <!-- ChiliPeppr is based on bootstrap CSS. -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <!-- Customized version of require.js for ChiliPeppr. Please see require.js docs for how
    ChiliPeppr's dependency system works as it's based on require.js. -->
    <script type='text/javascript' src="//i2dcui.appspot.com/js/require.js"></script>

    <!-- widget.css DON'T REMOVE -->
    <style type='text/css'>
        /* widget.css will get inlined here by runme.js. don't remove this comment or inlining will fail. */
    </style>
    <link rel="stylesheet" type="text/css" href="widget.css">
    <!-- DON'T REMOVE end widget.css -->

    <!-- widget.js DON'T REMOVE -->
    <script type='text/javascript'>
        //<![CDATA[
        /* widget.js will get inlined here by runme.js. don't remove this comment or inlining will fail. */
        //]]>
    </script>
    <script type='text/javascript' src="widget.js"></script>
    <!-- DON'T REMOVE end widget.js -->

</head>

<body>
   
<div id="com-chilipeppr-widget-grbl" class="panel panel-default">
    <div class="panel-heading">
        <div class="btn-toolbar pull-right" role="toolbar" >
    
            <div class="btn-group v1Show">
                <button type="button" class="btn btn-xs btn-default btn-warning grbl-safety-door"
                    data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" 
                    data-title="Safety Door" 
                    data-content="Immediately suspends into a DOOR state and disables the spindle and coolant. If in motion, the machine will decelerate to a stop and then be suspended"
                    >
                    <span class="glyphicon glyphicon-warning-sign"></span>
                </button>
                <button type="button" class="btn btn-xs btn-default hide-overrides"
                    data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" 
                    data-title="" data-content="Toggle Overrides">
                    <span class="glyphicon glyphicon-wrench"></span>
                </button>
                
            </div>
            
            <div class="btn-group">
                <button type="button" data-command='!' class="btn btn-xs btn-default btn-danger grbl-feedhold" data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" data-title="Feedhold" data-content="Stop movement immediately. Maintains positional accuracy. Sends ! command to GRBL which jumps past the planner buffer so you get immediate stop. Movement can be resumed with ~ command. If you want to jog you should flush queue with CTRL+X.">
                    <!-- span class="glyphicon glyphicon-stop"></span -->
                    Hold !
                </button>
                <button type="button" class="btn btn-xs btn-default grbl-cyclestart"  data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" data-title="Cycle Start" data-content="Resume movement from stopping point"><span class="">~</span></button>
                <!-- button type="button" class="btn btn-xs btn-default grbl-verbose"  data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" data-title="Toggle Verbose Output" data-content="Toggle verbose mode to show query responses in console - defaults to disabled, green when enabled"><span class="">v</span></button -->
                <!--<button type="button" class="btn btn-xs btn-default grbl-queueflush"  data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" data-title="Queue Flush" data-content="Empty planner buffer. Used for jogging and other cycles"><span class="">%</span></button>-->
                <button type="button" class="btn btn-xs btn-default grbl-reset" data-toggle="popover" data-placement="auto" data-container="body" data-content="GRBL Soft Reset" data-trigger="hover" >
                    <span class="glyphicon glyphicon-refresh"></span></button><!--Ctrl+X-->
                <button type="button" id="com-chilipeppr-widget-grbl-btnoptions" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-cog"></span></button>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-xs btn-default hidebody"><span class="glyphicon glyphicon-chevron-up"></span></button>
            </div>
            <div class="btn-group">
                <div class="dropdown">
                <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                <ul class="dropdown-menu dropdown-menu-right" role="menu">
                    <!-- li class="divider"></li-->
                    <li><a href="#" class="grbl-verbose">Toggle verbose mode</a></li>
                    <li><a href="#" class="grbl-debug">Toggle Debug mode</a></li>
                    <li><a href="#" class="grbl-v1mode">Force v1 mode</a></li>
                    
                    <!-- <li role="presentation" class="dropdown-header fork-name"></li>
                    <li><a href="" target="_blank" class="standalone">View Widget Standalone</a></li>
                    <li><a href="" target="_blank" class="fork">Fork Widget</a></li> -->
                </ul>
                </div>
            </div>
        </div>
        <span class="panel-title" data-toggle="popover">GRBL (1.1)</span> <!-- span style="font-size:9px;" class="fb-build">v1.0.10</span-->
    </div>
    <div id="com-chilipeppr-widget-grbl-body" class="panel-body" >
        <div id="grbl-buffer-warning" style="color:red;font-size:12px;text-align:center;">
            You must connect to your GRBL device using the GRBL buffer algorithm in this workspace.  Connecting to any other buffer (default, tinyg, etc) will cause unpredictable behavior.<br/><br/>
        </div>
        <!-- start new buttons -->
        <div class="com-chilipeppr-widget-grbl-realtime-commands v1Show"> 
          <!-- new commands fpr the 1.1 version -->
          <div class="row overrides-btn">
               <div class="col col-xs-3">
                      Feed Overrides 
                      <span class="ov-1" title="Current status">100</span>
               </div>
               <div class="col col-xs-9">
                   
                   <div class="btn-group">
                        <button type="button" class="btn btn-xs btn-primary feed-overrides-normal"  data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" data-title="Feed Overrides" data-content="Immediately alters the feed override value. An active feed motion is altered within tens of milliseconds. Does not alter rapid rates, which include G0, G28, and G30, or jog motions." data-send-code="90">
                           100%
                         </button>
                    </div>
                    <div class="btn-group">
                         <button type="button" class="btn btn-xs btn-default" data-send-code="91">
                           +10%
                         </button>
                         <button type="button" class="btn btn-xs btn-default" data-send-code="92">
                           -10%
                         </button>
                    </div>
                    <div class="btn-group">
                         <button type="button" class="btn btn-xs btn-default" data-send-code="93">
                           +1%
                         </button>
                         <button type="button" class="btn btn-xs btn-default" data-send-code="94">
                           -1%
                         </button>
                   </div>
               </div>
            
              </div>
       
          <div class="row overrides-btn">
               <div class="col col-xs-3">
                      Rapid Overrides 
                      <span class="ov-2" title="Current status">100</span>
               </div>
               <div class="col col-xs-9">
                   <div class="btn-group">
                     <button type="button" class="btn btn-xs btn-primary"  data-delay="500" data-animation="true" data-placement="auto" 
                     data-container="body" data-trigger="hover" data-title="Rapid Overrides" 
                     data-content="Immediately alters the rapid override value. An active rapid motion is altered within tens of milliseconds. Only effects rapid motions, which include G0, G28, and G30" 
                     data-send-code="95">
                        100%
                     </button>
                    </div>
                    <div class="btn-group">
                     <button type="button" class="btn btn-xs btn-default" data-send-code="96">
                       50%
                     </button>
                     <button type="button" class="btn btn-xs btn-default" data-send-code="97">
                       25%
                     </button> 
                   </div>
               </div>
            
              </div>
        
            <div class="row overrides-btn">
               <div class="col col-xs-3">
                      Spindle Overrides<br/>
                      <span class="ov-3" title="Current status">100</span>
               </div>
               <div class="col col-xs-9">
                    <div class="btn-group">
                        <button type="button" class="btn btn-xs btn-primary"  data-delay="500" data-animation="true" data-placement="auto" 
                        data-container="body" data-trigger="hover" data-title="Spindle speed Overrides" 
                        data-content="mmediately alters the spindle speed override value. An active spindle speed is altered within tens of milliseconds. Override values may be changed at any time, regardless of if the spindle is enabled or disabled." 
                        data-send-code="99">
                            100%
                        </button>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-xs btn-default" data-send-code="9A">
                           +10%
                         </button>
                         <button type="button" class="btn btn-xs btn-default" data-send-code="9B">
                           -10%
                         </button>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-xs btn-default" data-send-code="9C">
                           +1%
                        </button>
                         <button type="button" class="btn btn-xs btn-default" data-send-code="9D">
                           -1%
                         </button>
                    </div>
                </div>
            </div>
            
            
          
          <div class="row overrides-btn">
            <div class="col col-xs-3">
                      Toggle
               </div>
               <div class="col col-xs-9">
            <button type="button" class="btn btn-xs btn-default" data-send-code="A0"
            data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover"
            data-title="Toggle Flood Coolant" data-content="Toggles flood coolant state and output pin until the next toggle or g-code command alters it. May be commanded at any time while in IDLE, RUN, or HOLD states. It is otherwise ignored."
            >
              Flood C
            </button>
            
            <button type="button" class="btn btn-xs btn-default" data-send-code="A1"
            data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover"
            data-title="Toggle Mist Coolant" data-content="Enabled by ENABLE_M7 compile-time option. Default is disabled. Toggles mist coolant state and output pin until the next toggle or g-code command alters it."
            >
              Mist C
            </button>
            <button type="button" class="btn btn-xs btn-warning" data-send-code="9E" 
                data-delay="500" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover"
                data-title="Toggle Spindle Stop" data-content="Toggles spindle enable or disable state immediately, but only while in the HOLD state. The command is otherwise ignored, especially while in motion. This prevents accidental disabling during a job that can either destroy the part/machine or cause personal injury. Industrial machines handle the spindle stop override similarly. When motion restarts via cycle start, the last spindle state will be restored and wait 4.0 seconds (configurable) before resuming the tool path. This ensures the user doesn't forget to turn it back on. While disabled, spindle speed override values may still be altered and will be in effect once the spindle is re-enabled. If a safety door is opened, the DOOR state will supersede the spindle stop override, where it will manage the spindle re-energizing itself upon closing the door and resuming. The prior spindle stop override state is cleared and reset.">
                Stop Spindle
            </button>
          </div>
        </div>
        </div>
        <!--  end new buttons -->
        <div class="container-fluid com-chilipeppr-interface-cnccontroller-stat">
            <div class="row stat-row">
                <div class="col col-xs-3" id="ttl-state">
                    State
                </div>
                <div class="col col-xs-9 well" id='stat-state-background-box'>
                    <span class="stat-sm stat-state">Offline</span>
                </div>
            </div><!-- row -->
            <div class="row stat-row">
                <div class="col col-xs-3" id="ttl-mcoords" >
                    M Crds
                </div>
                <div class="col col-xs-9 well">
                    <span class="stat-sm stat-mcoords">0</span>
                </div>
            </div>
            <div class="row stat-row">
                <div class="col col-xs-3" id="ttl-units">
                    Units
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-units">-</span>
                </div>
                <div class="col col-xs-3 lblpad" id="ttl-feedrate">
                    Feedrate
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-feedrate">0</span>                   
                </div>
            </div><!-- row -->
            <div class="row stat-row">
                <div class="col col-xs-3" id="ttl-distance">
                    Distance
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-sm stat-distance">-</span>
                </div>
                <div class="col col-xs-3 lblpad" id="ttl-motion">
                    Motion
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-sm stat-motion">-</span>
                </div>
            </div><!-- row -->
            <div class="row stat-row ">
                <div class="col col-xs-3" id="ttl-wcs">
                    WCS
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-sm stat-wcs">-</span>
                </div>
                <div class="col col-xs-3 lblpad" id="ttl-plane">
                    Plane
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-sm stat-plane">-</span>
                </div>
            </div><!-- row -->
            <div class="row stat-row">
                <div class="col col-xs-3" id="ttl-coolant">
                    Coolant
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-sm stat-coolant">-</span>
                </div>
                <div class="col col-xs-3 lblpad" id="ttl-spindle">
                    Spindle
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-sm stat-spindle">-</span>
                </div>
            </div><!-- row -->
            <div class="row stat-row">
                <div class="col col-xs-3" id="ttl-queue">
                    SPJS Queue
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-sm stat-queue">0</span>
                </div>
                <div class="col col-xs-3 lblpad" id="ttl-jogFeedRate">
                    Jog Feedrate
                </div>
                <div class="col col-xs-3 well">
                    <span class="stat-sm "><span class="stat-jogFeedRate">200</span>  <span style="font-size:x-small">units/min</span></span>
                </div>
            </div><!-- row -->
            <span style="font-size:0.8em;">(These parameters may not update in real time)</span>
        </div>
    </div>
    <div id="com-chilipeppr-widget-grbl-debug" style="font-size:10px;display:none;" >
        <textarea id="com-chilipeppr-widget-grbl-debug-console" style="height:100px; width:100%"></textarea>
    </div>
    <div id="com-chilipeppr-widget-grbl-ftr" class="panel-footer" style="font-size:10px;">To report issues please visit the <a href='https://plus.google.com/communities/104346367498010042037'>Chilipeppr Community</a> <span id="widgetVersion">(v xx)</span></div>
</div>

<div class="modal fade " id="com-chilipeppr-widget-grbl-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">GRBL Config Settings</h4>
      </div>
      <div class="modal-body">
          <p style="color:red;">WARNING: This feature is extremely unstable and may wipe GRBL settings. Back up all output from $$ before attempting to save config through this window.</p>
          <div id="grbl-config-div" class="form-horizontal" role="form">
              
          </div>
          
      </div>
    </div>
  </div>
</div>
</body>
</html>